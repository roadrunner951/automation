!

!
version 15.9
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname R3
!
boot-start-marker
boot-end-marker
!
!
vrf definition MGMT
 !
 address-family ipv4
 exit-address-family
!
no logging console
!
no aaa new-model
!
!
!
mmi polling-interval 60
no mmi auto-configure
no mmi pvc
mmi snmp-timeout 180
!
!
!
!
!
!
!
!
!
!
!
ip domain name cisco.com
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
!
!
!
archive
 path flash:archive
 write-memory
username ray privilege 15 secret 9 $9$Hpknw/Nl4f9xhP$vtgk8YZ1dBKVLQqFHHbWZgEgOZ5ZBdXJJ.mTlho1FiY
!
redundancy
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
interface GigabitEthernet0/0
 ip address 192.168.179.132 255.255.255.0
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/1
 ip address 192.168.10.3 255.255.255.0
 ip ospf 1 area 0
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/2
 ip address 192.168.11.3 255.255.255.0
 ip ospf 1 area 0
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/3
 no ip address
 ip ospf 1 area 0
 shutdown
 duplex auto
 speed auto
 media-type rj45
!
{%if host.facts.OSPF is defined %}
router ospf {{ host.facts.OSPF.process_id }}
 router-id {{ host.facts.OSPF.rid }}
{% if host.facts.OSPF.redistributing is defined %}
{% for policy in host.facts.OSPF.redistributing %}
 redistribute {{ policy }}
{% endfor %}
{% endif %}
{%if host.facts.OSPF.networks is defined %}
{% for network in host.facts.OSPF.networks %}
 network {{ network }}
{% endfor %}
{% endif %}
{% endif %}
!
ip forward-protocol nd
!
!
no ip http server
no ip http secure-server
ip ssh version 2
ip scp server enable
!
{% if host.facts.ACCESS_LISTS is defined %}
{% for acl in host.facts.ACCESS_LISTS %}
ip access-list extended {{ acl }}
{% for rule in host.facts.ACCESS_LISTS[acl] %}
 {{ rule }}
{% endfor %}
{% endfor %}
{% endif %}
!
ipv6 ioam timestamp
!
!
!
control-plane
!
!
line con 0
 exec-timeout 0 0
line aux 0
line vty 0 4
 exec-timeout 0 0
 login local
 transport input ssh
!
no scheduler allocate
{% if host.facts.NTP is defined %}
{% if host.facts.NTP.update_calendar == True%}
ntp update-calendar
{% endif %}
{% if host.facts.NTP.servers is defined %}
{% for server in host.facts.NTP.servers %}
ntp server {{ server }}
{% endfor %}
{% endif %}
{% endif %}
!
end